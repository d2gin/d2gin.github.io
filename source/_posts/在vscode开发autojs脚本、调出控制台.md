---
title: 在vscode开发autojs脚本、调出控制台
date: 2020-03-13 16:26:46
index_img: /cover/3ea08048641117c36ba83437d432e2a0.jpg
banner_img: /cover/3ea08048641117c36ba83437d432e2a0.jpg
tags:
    - vscode
    - autojs
---
### 安装
在VS Code中菜单"查看"->“扩展”->输入"Auto.js"或"hyb1996"搜索，即可看到"Auto.js-VSCodeExt"插件，安装即可。插件的更新也可以在这里更新。

### 使用
#### Step 1
按 `Ctrl+Shift+P` 或点击"查看"->"命令面板"可调出命令面板，输入 `Auto.js` 可以看到几个命令，移动光标到命令`Auto.js: Start Server`，按回车键执行该命令。

此时VS Code会在右上角显示"Auto.js server running"，即开启服务成功。

打开新的项目，会掉线，需要重新run一下。只有保证这一步成功了，后面才能进行。

#### Step 2
将手机连接到电脑启用的Wifi或者同一局域网中。通过命令行ipconfig(或者其他操作系统的相同功能命令)查看电脑的IP地址。在手机上的Auto.js的侧拉菜单中启用调试服务，并输入IP地址，等待连接成功。

#### Step 3
之后就可以在电脑上编辑JavaScript文件并通过命令**Run**或者**按键F5**在手机上运行了。

### 常用命令
按 `Ctrl+Shift+P` 或点击"查看"->"命令面板"可调出命令面板，输入 Auto.js 可以看到几个命令：

**Run** 运行当前编辑器的脚本。如果有多个设备连接，则在所有设备运行。这里的运行脚本，无非是是把单个文件放到手机Auto.js的文件根目录下环境下运行（并不是实际挪移）。所以，如果有脚本依赖的话，需要把被依赖的脚本拷贝到手机上（下面有更简单的解决方案）。否则会报错。
**Save** 保存当前文件到手机的脚本默认目录（文件名会加上前缀remote)。如果有多个设备连接，则在所有设备保存。这个命令只能保存单个文件，不能保存文件夹。并且，文件只能保存到手机上脚本的默认根目录。
**Run Project**（运行项目）：运行一个项目，需要Auto.js 4.0.4Alpha5以上支持。这个命令比起Run，相当于是把整个项目，包括各种文件夹各种依赖一起放到手机根目录环境下运行而已。不需要拷贝整个项目，就可以run整个项目。更好的方式就是用这个命令运行整个项目。
**New Project**（新建项目）：选择一个空文件夹（或者在文件管理器中新建一个空文件夹），将会自动创建一个项目。新建项目只是在电脑上新建，和打开电脑上原有的项目是一样的。
**Save Project**（保存项目）：保存一个项目，需要Auto.js 4.0.4Alpha5以上支持。保存整个项目到手机根目录。
**Start Server** 启动插件服务。之后在确保手机和电脑在同一区域网的情况下，在Auto.js的侧拉菜单中使用连接电脑功能连接。
**Stop Server** 停止插件服务。
**Rerun** 停止当前文件对应的脚本并重新运行。如果有多个设备连接，则在所有设备重新运行。
**Stop** 停止当前文件对应的脚本。如果有多个设备连接，则在所有设备停止。
**StopAll** 停止所有正在运行的脚本。如果有多个设备连接，则在所有设备运行所有脚本。
**RunOnDevice** 弹出设备菜单并在指定设备运行脚本。
**SaveToDevice** 弹出设备菜单并在指定设备保存脚本。
以上命令一些有对应的快捷键，参照命令后面的说明即可。

所以，比较顺的思路就是用vs code在电脑上打开已有文件夹。然后修改代码之后，使用**Run Project**来运行整个项目，等调整满意了，再使用**Save Project**命令拷贝到手机。当然，如果是单文件或者说没有依赖的话，直接用**Run**和**Save**也是不错的选择。

### 日志
要显示来自Auto.js的日志，打开 VS Code上面菜单的"帮助"->“切换开发人员工具”->"Console"即可。